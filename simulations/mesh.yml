version: "3"
name: "mesh"

# Clients are grouped based on case
# All nodes are on the same network

services:
  A:
    extends: { file: common.yml, service: controller }
    networks: [ n ]
    environment: [ TCDICN_ID=my_sensor ]
  b:
    extends: { file: common.yml, service: controller }
    networks: [ n ]
    environment: [ TCDICN_ID=my_sensor ]
  C:
    extends: { file: common.yml, service: inspector }
    networks: [ n ]
    environment: [ TCDICN_ID=my_sensor ]
  d:
    extends: { file: common.yml, service: inspector }
    networks: [ n ]
    environment: [ TCDICN_ID=my_sensor ]
  E:
    extends: { file: common.yml, service: drone }
    networks: [ n ]
    environment: [ TCDICN_ID=my_sensor ]
  f:
    extends: { file: common.yml, service: drone }
    networks: [ n ]
    environment: [ TCDICN_ID=my_sensor ]
  G:
    extends: { file: common.yml, service: drone }
    networks: [ n ]
    environment: [ TCDICN_ID=my_sensor ]
  h:
    extends: { file: common.yml, service: drone }
    networks: [ n ]
    environment: [ TCDICN_ID=my_sensor ]

networks:
  n: { ipam: { config: [ subnet: 172.2.1.0/24 ] } }
